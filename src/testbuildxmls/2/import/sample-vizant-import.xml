<?xml version="1.0" encoding="UTF-8"?>
<project name="vizant-macro-import">

    <import file="sample-vizant-macro.xml"/>

    <path id="viz.classpath">
        <pathelement path="${vizant.jar}"/>
    </path>

    <taskdef name="vizant"
             classname="net.sourceforge.vizant.Vizant"
             classpathref="viz.classpath"/>

    <target name="vizinit" depends="vizdotexec">
        <fail unless="viz.antfile"
              message="must set viz.antfile=build/file.xml"/>
        <tstamp />
        <property name="viz.dts" value="${DSTAMP}${TSTAMP}"/>
        <!-- if already set in vizwindowscheck than the override ignored keeps it set, else unix -->
        <property name="viz.dotexec" value="dot" />
        <!-- if already set than the override is ignored -->
        <property name="vizant.jar" value="build/vizant.jar" />        
    </target>

    <target name="vizdotexec" depends="vizwindowscheck" if="vizdot.exe.present">
        <property name="viz.dotexec" value="C:\Program Files\Graphviz 2.28\bin\dot.exe" />    
    </target>

    <target name="vizwindowscheck">
        <property name="vizdot.exe" value="C:\Program Files\Graphviz 2.28\bin\dot.exe"/>
        <available file="${vizdot.exe}" property="vizdot.exe.present"/>            
    </target>

    <target name="default" depends="vizinit">
    	<property name="viz.file" value="${viz.antfile}"/>
        <vizdot antfile="${viz.file}"/>
    </target>
</project>
